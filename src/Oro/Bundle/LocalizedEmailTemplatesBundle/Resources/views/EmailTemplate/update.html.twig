{% extends '!OroEmailBundle:EmailTemplate:update.html.twig' %}

{% form_theme form with [
    'OroFormBundle:Form:fields.html.twig',
    '!OroEmailBundle:Form:fields.html.twig',
    'OroEmailBundle:Form:fields.html.twig',
]%}

{% block content_data %}
    {% set dataBlocks = [
        {
            'title': 'General'|trans,
            'class': 'active',
            'subblocks': [{
                'title': '',
                'data': [
                    form_row(form.name),
                    form_row(form.type, {'attr' : {'class': 'choice-template-type'}}),
                    form_row(form.entityName)
                ]
            }]
        },
        {
            'title': 'oro.email.emailtemplate.template_data_title'|trans,
            'subblocks': [
                {
                    'title': '',
                    'data': [
                        form_widget(form.localizations)
                    ]
                },
                {
                    'title': '',
                    'data': [
                        _emailMacros.renderAvailableVariablesWidget(form.vars.value.entityName, form.entityName.vars.id)
                    ]
                }
            ]
        }
    ] %}

    {% set data = {
        'formErrors': form_errors(form)? form_errors(form) : null,
        'dataBlocks': dataBlocks,
    } %}

    {{ parent() }}
{% endblock content_data %}
